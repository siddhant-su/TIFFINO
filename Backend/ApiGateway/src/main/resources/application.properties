#spring.application.name=api-gateway
#server.port=9090
#
## Eureka
#eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
#eureka.client.register-with-eureka=true
#eureka.client.fetch-registry=true
#
#spring.cloud.gateway.discovery.locator.enabled=true
#spring.cloud.gateway.discovery.locator.lower-case-service-id=true
#
## ---------------- ROUTES CLEAN VERSION ----------------
#
################################
## 0 ? ADMIN LOGIN
################################
#spring.cloud.gateway.routes[0].id=admin-login
#spring.cloud.gateway.routes[0].uri=http://localhost:9081/
#spring.cloud.gateway.routes[0].predicates[0]=Path=/admin/**
#
################################
## 1 ? ADMIN MEAL
################################
#spring.cloud.gateway.routes[1].id=admin-meal
#spring.cloud.gateway.routes[1].uri=http://localhost:9082/
#spring.cloud.gateway.routes[1].predicates[0]=Path=/adminn/**
#
################################
## 2 ? ADMIN SUBSCRIPTION
################################
#spring.cloud.gateway.routes[2].id=admin-subscription
#spring.cloud.gateway.routes[2].uri=http://localhost:9084/
#spring.cloud.gateway.routes[2].predicates[0]=Path=/api/admin/subscriptions/**
#
################################
## 3 ? USER SUBSCRIPTION
################################
#spring.cloud.gateway.routes[3].id=user-subscription
#spring.cloud.gateway.routes[3].uri=http://localhost:8084/
#spring.cloud.gateway.routes[3].predicates[0]=Path=/subscri/**
#
################################
## 4 ? ADMIN ORDER
################################
#spring.cloud.gateway.routes[4].id=admin-order
#spring.cloud.gateway.routes[4].uri=http://localhost:9083/
#spring.cloud.gateway.routes[4].predicates[0]=Path=/ordr/**
#
################################
## 5 ? ADMIN REVIEW
################################
#spring.cloud.gateway.routes[5].id=admin-review
#spring.cloud.gateway.routes[5].uri=http://localhost:9085/
#spring.cloud.gateway.routes[5].predicates[0]=Path=/rev/**
#
################################
## 6 ? USER REVIEW
################################
#spring.cloud.gateway.routes[6].id=user-review
#spring.cloud.gateway.routes[6].uri=http://localhost:8085/
#spring.cloud.gateway.routes[6].predicates[0]=Path=/reviews/**
#
################################
## 7 ? ANALYTICS
################################
#spring.cloud.gateway.routes[7].id=analytics
#spring.cloud.gateway.routes[7].uri=lb://reports-application
#spring.cloud.gateway.routes[7].predicates[0]=Path=/analytics/**
#
################################
## 8 ? CART SERVICE
################################
#spring.cloud.gateway.routes[8].id=cart-service
#spring.cloud.gateway.routes[8].uri=http://localhost:8083/
#spring.cloud.gateway.routes[8].predicates[0]=Path=/cart/**
#
################################
### 9 ? CLOUD KITCHEN
#################################
##spring.cloud.gateway.routes[9].id=cloud-kitchen
##spring.cloud.gateway.routes[9].uri=http://localhost:9080/
##spring.cloud.gateway.routes[9].predicates[0]=Path=/sa/**
#
################################
## 10 ? USER LOGIN / AUTH
################################
#spring.cloud.gateway.routes[10].id=user-auth
#spring.cloud.gateway.routes[10].uri=http://localhost:8081/
#spring.cloud.gateway.routes[10].predicates[0]=Path=/log/**
#
################################
## 11 ? USER MENU
################################
#spring.cloud.gateway.routes[11].id=user-menu
#spring.cloud.gateway.routes[11].uri=http://localhost:8082/
#spring.cloud.gateway.routes[11].predicates[0]=Path=/user/**
#
#################################
### 12 ? USER ORDER
#################################
##spring.cloud.gateway.routes[12].id=user-order
##spring.cloud.gateway.routes[12].uri=http://localhost:8086/
##spring.cloud.gateway.routes[12].predicates[0]=Path=/usr/**
#
#################################
## 12 ? USER ORDER (FINAL FIXED)
#################################
#spring.cloud.gateway.routes[12].id=user-order
#spring.cloud.gateway.routes[12].uri=http://localhost:8086/
#
## Match ALL possible /usr/orders/** paths
#spring.cloud.gateway.routes[12].predicates[0]=Path=/usr/orders/**
#
## Rewrite EVERYTHING after `/usr/orders/` ? `/orders/...`
#spring.cloud.gateway.routes[12].filters[0]=RewritePath=/usr/orders/(?<segment>.*), /orders/${segment}
#
#
## Cloud Kitchen Service
#spring.cloud.gateway.routes[9].id=cloud-kitchen-Super-admin
#spring.cloud.gateway.routes[9].uri=http://localhost:8080
#spring.cloud.gateway.routes[9].predicates[0]=Path=/api/admin/**
#
#
#



#updated
spring.application.name=api-gateway
server.port=9090

# =========================
# Eureka (inside Docker)
# =========================
eureka.client.service-url.defaultZone=http://service-registry:8761/eureka/
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true

spring.cloud.gateway.discovery.locator.enabled=true
spring.cloud.gateway.discovery.locator.lower-case-service-id=true

###############################
# 0 – ADMIN LOGIN
###############################
spring.cloud.gateway.routes[0].id=admin-login
spring.cloud.gateway.routes[0].uri=http://admin-login:9081/
spring.cloud.gateway.routes[0].predicates[0]=Path=/admin/**

###############################
# 1 – ADMIN MEAL
###############################
spring.cloud.gateway.routes[1].id=admin-meal
spring.cloud.gateway.routes[1].uri=http://admin-meal:9082/
spring.cloud.gateway.routes[1].predicates[0]=Path=/adminn/**

###############################
# 2 – ADMIN SUBSCRIPTION
###############################
spring.cloud.gateway.routes[2].id=admin-subscription
spring.cloud.gateway.routes[2].uri=http://admin-subscription:9084/
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/admin/subscriptions/**

###############################
# 3 – USER SUBSCRIPTION
###############################
spring.cloud.gateway.routes[3].id=user-subscription
spring.cloud.gateway.routes[3].uri=http://user-subscription:8084/
spring.cloud.gateway.routes[3].predicates[0]=Path=/subscri/**

###############################
# 4 – ADMIN ORDER
###############################
spring.cloud.gateway.routes[4].id=admin-order
spring.cloud.gateway.routes[4].uri=http://admin-order:9083/
spring.cloud.gateway.routes[4].predicates[0]=Path=/ordr/**

###############################
# 5 – ADMIN REVIEW
###############################
spring.cloud.gateway.routes[5].id=admin-review
spring.cloud.gateway.routes[5].uri=http://admin-review:9085/
spring.cloud.gateway.routes[5].predicates[0]=Path=/rev/**

###############################
# 6 – USER REVIEW
###############################
spring.cloud.gateway.routes[6].id=user-review
spring.cloud.gateway.routes[6].uri=http://user-review:8085/
spring.cloud.gateway.routes[6].predicates[0]=Path=/reviews/**

###############################
# 7 – ANALYTICS (reports-application via Eureka)
###############################
spring.cloud.gateway.routes[7].id=analytics
spring.cloud.gateway.routes[7].uri=lb://reports-application
spring.cloud.gateway.routes[7].predicates[0]=Path=/analytics/**

###############################
# 8 – CART SERVICE
###############################
spring.cloud.gateway.routes[8].id=cart-service
spring.cloud.gateway.routes[8].uri=http://cart-service:8083/
spring.cloud.gateway.routes[8].predicates[0]=Path=/cart/**

###############################
# 9 – CLOUD KITCHEN SUPER ADMIN
###############################
spring.cloud.gateway.routes[9].id=cloud-kitchen-Super-admin
spring.cloud.gateway.routes[9].uri=http://cloud-kitchen-superadmin:8080/
spring.cloud.gateway.routes[9].predicates[0]=Path=/api/admin/**

###############################
# 10 – USER LOGIN / AUTH
###############################
spring.cloud.gateway.routes[10].id=user-auth
spring.cloud.gateway.routes[10].uri=http://user-auth:8081/
spring.cloud.gateway.routes[10].predicates[0]=Path=/log/**

###############################
# 11 – USER MENU
###############################
spring.cloud.gateway.routes[11].id=user-menu
spring.cloud.gateway.routes[11].uri=http://user-menu:8082/
spring.cloud.gateway.routes[11].predicates[0]=Path=/user/**

################################
# 12 – USER ORDER (FINAL FIXED)
################################
spring.cloud.gateway.routes[12].id=user-order
spring.cloud.gateway.routes[12].uri=http://user-order:8086/
spring.cloud.gateway.routes[12].predicates[0]=Path=/usr/orders/**
spring.cloud.gateway.routes[12].filters[0]=RewritePath=/usr/orders/(?<segment>.*), /orders/${segment}